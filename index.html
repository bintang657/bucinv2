<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untuk Keyren üíô</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:ital,wght@1,600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { maroon: '#800000', 'maroon-light': '#a52a2a', 'blue-dark': '#0b1121', 'blue-accent': '#38bdf8' },
                    fontFamily: { sans: ['Poppins', 'sans-serif'], serif: ['Playfair Display', 'serif'] }
                }
            }
        }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.1/vanilla-tilt.min.js"></script>

    <style>
        body { margin: 0; overflow-x: hidden; background-color: #0b1121; cursor: none; }
        
        #canvas-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -2; background: radial-gradient(circle at center, #1e3a5f 0%, #0b1121 100%); }

        /* Custom Cursor */
        .cursor-dot, .cursor-outline { position: fixed; top: 0; left: 0; transform: translate(-50%, -50%); border-radius: 50%; z-index: 9999; pointer-events: none; }
        .cursor-dot { width: 8px; height: 8px; background-color: #38bdf8; }
        .cursor-outline { width: 30px; height: 30px; border: 2px solid rgba(128, 0, 0, 0.5); transition: width 0.2s, height 0.2s, background-color 0.2s; }

        /* Animasi Hati Melayang di Background */
        .hearts-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; overflow: hidden; }
        .heart { position: absolute; bottom: -100px; background-color: rgba(165, 42, 42, 0.4); width: 20px; height: 20px; transform: rotate(-45deg); animation: floatUp 10s infinite ease-in; }
        .heart::before, .heart::after { content: ''; position: absolute; width: 20px; height: 20px; background-color: inherit; border-radius: 50%; }
        .heart::before { top: -10px; left: 0; }
        .heart::after { left: 10px; top: 0; }
        
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(-45deg) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-120vh) rotate(-45deg) scale(1.5); opacity: 0; }
        }

        .typewriter-text { border-right: 2px solid #38bdf8; white-space: pre-wrap; animation: blink 0.75s step-end infinite; }
        @keyframes blink { 50% { border-color: transparent; } }

        /* GALERI 3D CAROUSEL (4 Sisi) */
        .scene { width: 250px; height: 350px; perspective: 1000px; margin: 40px auto; }
        .carousel { width: 100%; height: 100%; position: absolute; transform-style: preserve-3d; animation: rotateCarousel 20s infinite linear; }
        .carousel:hover { animation-play-state: paused; }
        .carousel-item { position: absolute; width: 250px; height: 350px; border: 3px solid #800000; border-radius: 15px; overflow: hidden; box-shadow: 0 0 30px rgba(56, 189, 248, 0.3); }
        .carousel-item img { width: 100%; height: 100%; object-fit: cover; }
        .item-1 { transform: rotateY(0deg) translateZ(200px); }
        .item-2 { transform: rotateY(90deg) translateZ(200px); }
        .item-3 { transform: rotateY(180deg) translateZ(200px); }
        .item-4 { transform: rotateY(270deg) translateZ(200px); }
        @keyframes rotateCarousel { from { transform: rotateY(0deg); } to { transform: rotateY(360deg); } }

        /* Piringan Hitam Music */
        .music-player { position: fixed; top: 20px; left: 20px; z-index: 50; display: none; align-items: center; gap: 10px; background: rgba(0,0,0,0.5); padding: 8px 15px; border-radius: 30px; border: 1px solid #38bdf8; backdrop-filter: blur(5px); }
        .vinyl { width: 30px; height: 30px; background: #111; border-radius: 50%; border: 2px solid #333; position: relative; animation: spinVinyl 3s linear infinite; display: flex; justify-content: center; align-items: center; }
        .vinyl::after { content: ''; width: 10px; height: 10px; background: #800000; border-radius: 50%; }
        @keyframes spinVinyl { 100% { transform: rotate(360deg); } }

    </style>
</head>
<body class="text-white font-sans antialiased selection:bg-maroon selection:text-white">

    <div class="cursor-dot" id="cursor-dot"></div>
    <div class="cursor-outline" id="cursor-outline"></div>

    <div id="canvas-container"></div>
    
    <div class="hearts-bg" id="hearts-bg"></div>

    <audio id="bg-music" loop>
        <source src="Music.mp3" type="audio/mpeg">
    </audio>

    <div class="music-player" id="music-player">
        <div class="vinyl"></div>
        <span class="text-xs text-blue-accent animate-pulse">Playing our song...</span>
    </div>

    <div id="intro-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-blue-dark transition-opacity duration-1000">
        <div class="w-24 h-24 border-t-4 border-b-4 border-maroon rounded-full animate-spin mb-8 absolute opacity-50"></div>
        <h1 class="text-4xl font-serif text-maroon-light mb-8 z-10" data-aos="zoom-in" data-aos-duration="1500">Untuk Keyren</h1>
        <button onclick="startExperience()" class="px-8 py-3 rounded-full bg-transparent border-2 border-blue-accent text-blue-accent hover:bg-blue-accent hover:text-blue-dark hover:shadow-[0_0_20px_#38bdf8] transition-all duration-300 font-bold tracking-widest z-10" id="hover-btn">
            BUKA PESAN
        </button>
    </div>

    <div id="main-content" class="hidden opacity-0 transition-opacity duration-1000">
        
        <main class="min-h-screen flex flex-col items-center justify-center p-6 text-center relative pt-20" id="hero">
            <h1 class="text-5xl md:text-7xl font-serif text-transparent bg-clip-text bg-gradient-to-r from-maroon-light to-blue-accent mb-6" data-aos="fade-down" data-aos-duration="1000">
                Hai, Keyren
            </h1>
            <div class="max-w-2xl bg-white/5 p-8 rounded-2xl backdrop-blur-md border border-maroon/40 shadow-[0_0_40px_rgba(128,0,0,0.3)] glass-box" data-tilt data-tilt-max="10" data-tilt-speed="400" data-tilt-glare="true" data-tilt-max-glare="0.2">
                <p id="typewriter" class="text-xl md:text-2xl text-blue-accent/90 font-light leading-relaxed typewriter-text"></p>
            </div>
        </main>

        <section class="py-20 overflow-hidden relative">
            <div class="text-center mb-10" data-aos="fade-up">
                <h2 class="text-3xl font-serif text-maroon-light mb-4 text-shadow-lg">Bingkai Waktu</h2>
                <p class="text-gray-300 max-w-md mx-auto px-4">Di sini kutaruh bagian kecil dari memori kita. Coba arahkan kursor ke fotonya.</p>
            </div>
            
            <div class="scene" data-aos="zoom-in" data-aos-duration="1500">
                <div class="carousel">
                    <div class="carousel-item item-1"><img src="https://files.catbox.moe/7imps1.jpg" alt="Foto 1"></div>
                    <div class="carousel-item item-2"><img src="https://files.catbox.moe/qcapl8.jpg" alt="Foto 2"></div>
                    <div class="carousel-item item-3"><img src="https://files.catbox.moe/mkkdhg.jpg" alt="Foto 3"></div>
                    <div class="carousel-item item-4"><img src="https://files.catbox.moe/u4k0j9.jpg" alt="Foto 4"></div>
                </div>
            </div>
        </section>

        <section class="py-20 px-6 max-w-xl mx-auto mb-20" data-aos="fade-up">
            <div class="bg-gradient-to-br from-blue-dark/80 to-maroon/30 p-8 rounded-2xl border border-blue-accent/30 shadow-[0_0_30px_rgba(56,189,248,0.2)] glass-box" data-tilt data-tilt-max="5">
                <h2 class="text-2xl font-bold mb-2 text-center text-white">Ada yang ingin disampaikan?</h2>
                <p class="text-sm text-center text-gray-400 mb-6">Tulis apa saja. Aku akan membacanya saat ini juga.</p>
                
                <textarea id="pesan-keyren" rows="4" class="w-full bg-black/60 border border-maroon-light rounded-xl p-4 text-white focus:outline-none focus:border-blue-accent focus:shadow-[0_0_15px_#38bdf8] transition-all mb-4 placeholder-gray-500 hover-target" placeholder="Ketik balasanmu di sini..."></textarea>
                
                <button onclick="kirimPesanKeTelegram()" class="w-full bg-gradient-to-r from-maroon to-maroon-light hover:from-blue-accent hover:to-blue-dark text-white font-bold py-3 rounded-xl transition-all duration-500 shadow-lg shadow-maroon/40 hover:shadow-blue-accent/40 flex justify-center items-center gap-2 hover-target">
                    <span>Kirim Pesan</span> üöÄ
                </button>
            </div>
        </section>

    </div>

    <button onclick="tekanTombolKangen()" class="fixed bottom-6 right-6 z-50 bg-gradient-to-r from-maroon to-maroon-light text-white rounded-full p-4 shadow-[0_0_20px_#a52a2a] flex items-center gap-2 transition-all transform hover:scale-110 group hidden hover-target" id="btn-kangen">
        <span class="text-2xl animate-pulse">‚ù§Ô∏è</span>
        <span class="hidden group-hover:inline-block font-semibold pr-2 whitespace-nowrap">Aku Kangen!</span>
    </button>

    <script>
        // INISIALISASI SCROLL ANIMATION (AOS)
        AOS.init({ once: false, mirror: true });

        // LOGIKA KURSOR KUSTOM
        const cursorDot = document.getElementById("cursor-dot");
        const cursorOutline = document.getElementById("cursor-outline");
        window.addEventListener("mousemove", function (e) {
            const posX = e.clientX; const posY = e.clientY;
            cursorDot.style.left = `${posX}px`; cursorDot.style.top = `${posY}px`;
            cursorOutline.style.animate = cursorOutline.animate({ left: `${posX}px`, top: `${posY}px` }, { duration: 500, fill: "forwards" });
        });
        
        document.querySelectorAll('button, textarea, .hover-target').forEach(el => {
            el.addEventListener('mouseenter', () => {
                cursorOutline.style.width = '50px'; cursorOutline.style.height = '50px';
                cursorOutline.style.backgroundColor = 'rgba(56, 189, 248, 0.2)';
                cursorOutline.style.borderColor = '#38bdf8';
            });
            el.addEventListener('mouseleave', () => {
                cursorOutline.style.width = '30px'; cursorOutline.style.height = '30px';
                cursorOutline.style.backgroundColor = 'transparent';
                cursorOutline.style.borderColor = 'rgba(128, 0, 0, 0.5)';
            });
        });

        // BUAT HATI MELAYANG
        function createHearts() {
            const container = document.getElementById('hearts-bg');
            for(let i=0; i<15; i++) {
                let heart = document.createElement('div');
                heart.classList.add('heart');
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(heart);
            }
        }
        createHearts();

        // --- KONFIGURASI TELEGRAM ---
        const TELEGRAM_BOT_TOKEN = '8303109998:AAGOsoAvit6hCAjpSmjBeeCIj2MManPdgWM';
        const TELEGRAM_CHAT_ID = '5552266500';

        function sendToTelegram(textMessage, successMessage) {
            const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: textMessage, parse_mode: 'HTML' }) })
            .then(res => res.json())
            .then(res => { if(res.ok) { Swal.fire({ title: 'Berhasil!', text: successMessage, icon: 'success', confirmButtonColor: '#800000', background: '#0b1121', color: '#fff' }); } })
            .catch(err => Swal.fire({ title: 'Oops!', text: 'Gagal mengirim pesan.', icon: 'error', background: '#0b1121', color: '#fff' }));
        }

        function tekanTombolKangen() {
            confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 }, colors: ['#800000', '#38bdf8', '#ffffff'] });
            sendToTelegram(`üö® <b>NOTIFIKASI BUCIN!</b>\n\nKeyren memencet tombol <b>"Aku Kangen!"</b> ‚ù§Ô∏è`, 'Notifikasi kangen langsung masuk ke HP-ku! Tunggu balasanku ya ‚ù§Ô∏è');
        }

        function kirimPesanKeTelegram() {
            const isi = document.getElementById('pesan-keyren').value;
            if(!isi.trim()) return Swal.fire({ icon: 'warning', title: 'Tunggu', text: 'Pesan jangan kosong ya.', background: '#0b1121', color: '#fff' });
            sendToTelegram(`üíå <b>PESAN DARI KEYREN</b>\n\n"${isi}"`, 'Pesanmu udah masuk ke HP-ku ‚ú®');
            document.getElementById('pesan-keyren').value = ''; 
        }

        // --- LOGIKA BUKA WEB & EFEK NGETIK ---
        const textToType = "Di antara miliaran probabilitas di dunia, aku bersyukur semesta mengarahkan garis waktuku padamu.\n\nWebsite ini kubangun khusus untuk menyimpan sebagian kecil memori kita. Tempat di mana kamu bisa selalu kembali saat merasa sepi.";
        let i = 0;
        function typeWriter() {
            if (i < textToType.length) {
                document.getElementById("typewriter").innerHTML += textToType.charAt(i);
                i++; setTimeout(typeWriter, 50);
            } else { document.getElementById("typewriter").style.borderRight = "none"; }
        }

        function startExperience() {
            // Mainkan Lagu (BGM)
            document.getElementById('bg-music').play();
            document.getElementById('music-player').style.display = 'flex';

            document.getElementById('intro-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('intro-screen').style.display = 'none';
                const main = document.getElementById('main-content');
                main.style.display = 'block';
                setTimeout(() => {
                    main.style.opacity = '1';
                    document.getElementById('btn-kangen').classList.remove('hidden');
                    setTimeout(typeWriter, 1000);
                }, 100);
            }, 1000);
        }

        // --- 3D BACKGROUND (Three.js) ---
        const init3D = () => {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            const geo = new THREE.BufferGeometry();
            const pos = new Float32Array(450); const col = new Float32Array(450);
            const cMaroon = new THREE.Color('#a52a2a'); const cBlue = new THREE.Color('#38bdf8');

            for(let i=0; i<450; i+=3) {
                pos[i] = (Math.random()-0.5)*20; pos[i+1] = (Math.random()-0.5)*20; pos[i+2] = (Math.random()-0.5)*15;
                const c = Math.random()>0.5 ? cMaroon : cBlue;
                col[i]=c.r; col[i+1]=c.g; col[i+2]=c.b;
            }
            geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            geo.setAttribute('color', new THREE.BufferAttribute(col, 3));

            const mat = new THREE.PointsMaterial({ size: 0.04, vertexColors: true, transparent: true, opacity: 0.7 });
            const mesh = new THREE.Points(geo, mat); scene.add(mesh);
            camera.position.z = 5;

            let mx=0, my=0;
            document.addEventListener('mousemove', e => { mx=(e.clientX-window.innerWidth/2)*0.001; my=(e.clientY-window.innerHeight/2)*0.001; });

            const animate = () => {
                requestAnimationFrame(animate);
                mesh.rotation.y += 0.001; mesh.rotation.x += 0.0005;
                mesh.rotation.y += 0.05 * (mx - mesh.rotation.y); mesh.rotation.x += 0.05 * (my - mesh.rotation.x);
                renderer.render(scene, camera);
            }; animate();
            window.addEventListener('resize', () => { camera.aspect = window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });
        };
        window.onload = init3D;
    </script>
</body>
</html>
